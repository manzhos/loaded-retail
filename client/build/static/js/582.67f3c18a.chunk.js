"use strict";(self.webpackChunkloaded_retail=self.webpackChunkloaded_retail||[]).push([[582],{4920:function(e,t,n){n.d(t,{Z:function(){return a}});n(7313);var r=n(2524),i=n(7829),s=n(6417);function a(e){let{icon:t,sx:n,...a}=e;return(0,s.jsx)(i.Z,{component:r.JO,icon:t,sx:{...n},...a})}},2241:function(e,t,n){n.d(t,{Z:function(){return a}});n(7313);var r=n(501),i=n(1113),s=n(6417);function a(e){let{searchQuery:t="",...n}=e;return(0,s.jsxs)(r.Z,{...n,children:[(0,s.jsx)(i.Z,{gutterBottom:!0,align:"center",variant:"subtitle1",children:"Not found"}),(0,s.jsxs)(i.Z,{variant:"body2",align:"center",children:["No results found for \xa0",(0,s.jsxs)("strong",{children:['"',t,'"']}),". Try checking for typos or using complete words."]})]})}},1582:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var r=n(3448),i=n(6031),s=n(7313),a=n(778),o=n(6287),l=n(9793),c=n(178),d=n(5898),h=n(1113),u=n(9099),x=n(7887),m=n(7829),p=n(9019),g=n(4631),j=n(3428),Z=n(1629),f=n(6835),y=n(3467),v=n(4076),w=n(7478),b=n(6330),S=n(7649),C=n(3477),P=n(2558),k=n(6417);const D={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function I(e){let{order:t,orderBy:n,rowCount:r,headLabel:i,numSelected:s,onRequestSort:a,onSelectAllClick:o}=e;return(0,k.jsx)(C.Z,{children:(0,k.jsxs)(v.Z,{children:[(0,k.jsx)(w.Z,{padding:"checkbox",children:(0,k.jsx)(b.Z,{indeterminate:s>0&&s<r,checked:r>0&&s===r,onChange:o})}),i.map((e=>{return(0,k.jsx)(w.Z,{align:e.alignRight?"right":"left",sortDirection:n===e.id&&t,children:(0,k.jsxs)(P.Z,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:(r=e.id,e=>{"role"===r&&(r="shoptype"),a(e,r)}),children:[e.label,n===e.id?(0,k.jsx)(m.Z,{sx:{...D},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var r}))]})})}var L=n(7592),R=n(9289),O=n(7843),T=n(1727),A=n(1689),E=n(7131),$=n(4920);const F=(0,L.ZP)(R.Z)((e=>{let{theme:t}=e;return{height:96,display:"flex",justifyContent:"space-between",padding:t.spacing(0,1,0,3)}})),N=(0,L.ZP)(O.Z)((e=>{let{theme:t}=e;return{width:240,transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:320},"& fieldset":{borderWidth:"1px !important",borderColor:`${t.palette.grey[50032]} !important`}}}));function _(e){let{numSelected:t,onFilterName:n,onDelete:r}=e;const[i,a]=(0,s.useState)("");return(0,k.jsxs)(F,{sx:{...t>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[t>0?(0,k.jsxs)(h.Z,{component:"div",variant:"subtitle1",children:[t," selected"]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N,{value:i,onChange:e=>{a(e.target.value),n(e.target.value)},placeholder:"Search shop...",startAdornment:(0,k.jsx)(T.Z,{position:"start",children:(0,k.jsx)($.Z,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),(0,k.jsx)("div",{style:{width:"20px"},children:"\xa0"})]}),t>0?(0,k.jsx)(A.Z,{title:"Delete",children:(0,k.jsx)(E.Z,{onClick:()=>{r()},children:(0,k.jsx)($.Z,{icon:"eva:trash-2-fill"})})}):(0,k.jsx)(A.Z,{title:"Filter list",children:(0,k.jsx)(E.Z,{children:(0,k.jsx)($.Z,{icon:"ic:round-filter-list"})})})]})}var W=n(9601),q=n(1405),U=n(4748),B=n(3213);function G(e){let{id:t,onChange:n}=e;const r=(0,s.useRef)(null),[i,l]=(0,s.useState)(!1),{request:c}=(0,a.i)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(E.Z,{ref:r,onClick:()=>l(!0),children:(0,k.jsx)($.Z,{icon:"eva:more-vertical-fill",width:20,height:20})}),(0,k.jsx)(W.Z,{open:i,anchorEl:r.current,onClose:()=>l(!1),PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,k.jsxs)(q.Z,{sx:{color:"text.secondary"},onClick:async e=>{e.preventDefault();try{await c(`${o.Z.API_URL}api/store/${t}`,"DELETE",null,{}),l(!1),n(!0)}catch(r){console.log("error:",r)}},children:[(0,k.jsx)(U.Z,{children:(0,k.jsx)($.Z,{icon:"eva:trash-2-outline",width:24,height:24})}),(0,k.jsx)(B.Z,{primary:"Delete",primaryTypographyProps:{variant:"body2"}})]})})]})}var z=n(2241);const Q=[{id:"name",label:"Name",alignRight:!1},{id:"act",label:"",alignRight:!1}];function V(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Y(){const[e,t]=(0,s.useState)([]),[n,C]=(0,s.useState)([]),[P,D]=(0,s.useState)(""),[L,R]=(0,s.useState)("asc"),[O,T]=(0,s.useState)("name"),[A,E]=(0,s.useState)(0),[F,N]=(0,s.useState)(5),[W,q]=(0,s.useState)("add"),[U,B]=(0,s.useState)(),[Y,J]=(0,s.useState)(""),{loading:M,request:H}=(0,a.i)(),K=(0,s.useCallback)((async()=>{try{const e=await H(`${o.Z.API_URL}api/store`,"GET",null,{});t(e)}catch(e){console.log("error:",e)}}),[H,e]);(0,s.useEffect)((()=>{K()}),[]);const X=t=>{if(t.target.checked){const t=e.map((e=>e.name));C(t)}else C([])},ee=function(e,t,n){const r=e.map(((e,t)=>[e,t]));return r.sort(((e,n)=>{const r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n?(0,i.filter)(e,(e=>-1!==e.name.toLowerCase().indexOf(n.toLowerCase())||-1!==e.name.toLowerCase().indexOf(n.toLowerCase()))):r.map((e=>e[0]))}(e,function(e,t){return"desc"===e?(e,n)=>V(e,n,t):(e,n)=>-V(e,n,t)}(L,O),P),te=0===ee.length,ne=e=>{D(e)},re=(e,t)=>{R(O===t&&"asc"===L?"desc":"asc"),T(t)},ie=(e,t)=>{E(t)},se=e=>{N(parseInt(e.target.value,10)),E(0)},[ae,oe]=(0,s.useState)(!1),le=e=>{q(e),oe(!0)},ce=()=>oe(!1),de=async e=>{e.preventDefault();const t=new FormData(e.currentTarget);if(t.get("name"))try{await H(`${o.Z.API_URL}api/store`,"POST",{name:t.get("name")})&&(oe(!1),ue())}catch(n){console.log("error:",n)}else alert("You need to fill fields.")},he=async e=>{e.preventDefault();const t=new FormData(e.currentTarget);if(t.get("name"))try{await H(`${o.Z.API_URL}api/store/${U}`,"POST",{name:t.get("name")})&&(oe(!1),ue())}catch(n){console.log("error:",n)}else alert("You need to fill fields.")},ue=()=>{K()},xe=()=>{n.map((t=>{try{const n=e.filter((e=>e.name===t))[0].id;H(`${o.Z.API_URL}api/store/${n}`,"DELETE",null,{}),ue()}catch(n){console.log("error:",n)}}))};return M?(0,k.jsx)(l.Z,{}):(0,k.jsxs)(c.Z,{children:[(0,k.jsxs)(d.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,k.jsx)(h.Z,{variant:"h4",gutterBottom:!0,children:"Stores"}),(0,k.jsx)(u.Z,{variant:"contained",onClick:()=>{le("add")},startIcon:(0,k.jsx)($.Z,{icon:"eva:plus-fill"}),children:"Add Store"}),(0,k.jsx)(x.Z,{open:ae,onClose:ce,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,k.jsx)(c.Z,{component:"main",maxWidth:"md",disableGutters:!0,children:(0,k.jsx)("div",{className:"login-modal",children:(0,k.jsxs)(m.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,k.jsxs)(h.Z,{component:"h1",variant:"h5",children:[(0,k.jsx)("span",{style:{textTransform:"uppercase"},children:W})," STORE"]}),(0,k.jsxs)(m.Z,{component:"form",noValidate:!0,onSubmit:"add"===W?de:he,sx:{mt:3},style:{width:"100%",textAlign:"center"},children:[(0,k.jsx)(p.ZP,{container:!0,spacing:2,children:(0,k.jsx)(p.ZP,{container:!0,spacing:2,item:!0,xs:12,sm:12,children:(0,k.jsx)(p.ZP,{item:!0,xs:12,sm:12,children:(0,k.jsx)(g.Z,{autoComplete:"name",name:"name",required:!0,fullWidth:!0,id:"name",label:"Name",defaultValue:Y,autoFocus:!0})})})}),(0,k.jsx)(u.Z,{type:"submit",variant:"contained",sx:{mt:3,mb:2},style:{padding:"8px 40px 5px"},children:"Save"})]})]})})})})]}),(0,k.jsxs)(j.Z,{children:[(0,k.jsx)(_,{numSelected:n.length,onFilterName:ne,onDelete:xe}),(0,k.jsx)(Z.Z,{sx:{minWidth:800},children:(0,k.jsxs)(f.Z,{children:[(0,k.jsx)(I,{order:L,orderBy:O,headLabel:Q,rowCount:e.length,numSelected:n.length,onRequestSort:re,onSelectAllClick:X}),(0,k.jsxs)(y.Z,{children:[ee.map((e=>{const{id:t,name:i}=e,s=-1!==n.indexOf(i);return(0,k.jsxs)(v.Z,{hover:!0,tabIndex:-1,role:"checkbox",selected:s,"aria-checked":s,style:{cursor:"pointer"},children:[(0,k.jsx)(w.Z,{padding:"checkbox",children:(0,k.jsx)(b.Z,{checked:s,onChange:e=>((e,t)=>{const r=n.indexOf(t);let i=[];-1===r?i=i.concat(n,t):0===r?i=i.concat(n.slice(1)):r===n.length-1?i=i.concat(n.slice(0,-1)):r>0&&(i=i.concat(n.slice(0,r),n.slice(r+1))),C(i)})(0,i)})}),(0,k.jsx)(w.Z,{component:"th",scope:"row",padding:"normal",onClick:e=>((e,t,n)=>{B(t),J(n),le("edit")})(0,t,i),children:(0,k.jsx)(d.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,k.jsx)(h.Z,{variant:"body1",noWrap:!0,children:(0,r.G)(i)})})}),(0,k.jsx)(w.Z,{align:"right",children:(0,k.jsx)(G,{id:t,shop:e,onChange:ue})})]},t)})),!1]}),te&&(0,k.jsx)(y.Z,{children:(0,k.jsx)(v.Z,{children:(0,k.jsx)(w.Z,{align:"center",colSpan:6,sx:{py:3},children:(0,k.jsx)(z.Z,{searchQuery:P})})})})]})}),(0,k.jsx)(S.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:e.length,rowsPerPage:F,page:A,onPageChange:ie,onRowsPerPageChange:se})]})]})}}}]);