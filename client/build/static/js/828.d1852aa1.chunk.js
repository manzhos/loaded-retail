"use strict";(self.webpackChunkloaded_retail=self.webpackChunkloaded_retail||[]).push([[828],{4920:function(e,t,n){n.d(t,{Z:function(){return s}});n(7313);var r=n(2524),i=n(7829),o=n(6417);function s(e){let{icon:t,sx:n,...s}=e;return(0,o.jsx)(i.Z,{component:r.JO,icon:t,sx:{...n},...s})}},2241:function(e,t,n){n.d(t,{Z:function(){return s}});n(7313);var r=n(501),i=n(1113),o=n(6417);function s(e){let{searchQuery:t="",...n}=e;return(0,o.jsxs)(r.Z,{...n,children:[(0,o.jsx)(i.Z,{gutterBottom:!0,align:"center",variant:"subtitle1",children:"Not found"}),(0,o.jsxs)(i.Z,{variant:"body2",align:"center",children:["No results found for \xa0",(0,o.jsxs)("strong",{children:['"',t,'"']}),". Try checking for typos or using complete words."]})]})}},3828:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=n(3448),i=n(6031),o=n(7313),s=n(778),c=n(6287),l=n(9793),a=n(178),d=n(5898),u=n(1113),h=n(9099),p=n(7887),x=n(7829),m=n(9019),g=n(4631),j=n(1550),Z=n(3306),y=n(4256),f=n(1405),b=n(2461),v=n(3428),w=n(1629),P=n(6835),C=n(3467),S=n(4076),k=n(7478),I=n(6330),D=n(7649),_=n(3477),T=n(2558),R=n(6417);const A={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function L(e){let{order:t,orderBy:n,rowCount:r,headLabel:i,numSelected:o,onRequestSort:s,onSelectAllClick:c}=e;return(0,R.jsx)(_.Z,{children:(0,R.jsxs)(S.Z,{children:[(0,R.jsx)(k.Z,{padding:"checkbox",children:(0,R.jsx)(I.Z,{indeterminate:o>0&&o<r,checked:r>0&&o===r,onChange:c})}),i.map((e=>{return(0,R.jsx)(k.Z,{align:e.alignRight?"right":"left",sortDirection:n===e.id&&t,children:(0,R.jsxs)(T.Z,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:(r=e.id,e=>{"role"===r&&(r="producttype"),s(e,r)}),children:[e.label,n===e.id?(0,R.jsx)(x.Z,{sx:{...A},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var r}))]})})}var q=n(7592),W=n(9289),$=n(7843),O=n(1727),E=n(1689),F=n(7131),U=n(4920);const V=(0,q.ZP)(W.Z)((e=>{let{theme:t}=e;return{height:96,display:"flex",justifyContent:"space-between",padding:t.spacing(0,1,0,3)}})),N=(0,q.ZP)($.Z)((e=>{let{theme:t}=e;return{width:240,transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:320},"& fieldset":{borderWidth:"1px !important",borderColor:`${t.palette.grey[50032]} !important`}}}));function G(e){let{numSelected:t,onFilterName:n,onDelete:r}=e;const[i,s]=(0,o.useState)("");return(0,R.jsxs)(V,{sx:{...t>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[t>0?(0,R.jsxs)(u.Z,{component:"div",variant:"subtitle1",children:[t," selected"]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(N,{value:i,onChange:e=>{s(e.target.value),n(e.target.value)},placeholder:"Search product...",startAdornment:(0,R.jsx)(O.Z,{position:"start",children:(0,R.jsx)(U.Z,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),(0,R.jsx)("div",{style:{width:"20px"},children:"\xa0"})]}),t>0?(0,R.jsx)(E.Z,{title:"Delete",children:(0,R.jsx)(F.Z,{onClick:()=>{r()},children:(0,R.jsx)(U.Z,{icon:"eva:trash-2-fill"})})}):(0,R.jsx)(E.Z,{title:"Filter list",children:(0,R.jsx)(F.Z,{children:(0,R.jsx)(U.Z,{icon:"ic:round-filter-list"})})})]})}var B=n(9601),z=n(4748),Q=n(3213);function H(e){let{id:t,product:n={},productTypeList:i=[],onChange:l}=e;const d=(0,o.useRef)(null),[b,v]=(0,o.useState)(!1),[w,P]=(0,o.useState)(n.producttype_id),{request:C}=(0,s.i)(),[S,k]=(0,o.useState)(!1);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(F.Z,{ref:d,onClick:()=>v(!0),children:(0,R.jsx)(U.Z,{icon:"eva:more-vertical-fill",width:20,height:20})}),(0,R.jsxs)(B.Z,{open:b,anchorEl:d.current,onClose:()=>v(!1),PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,R.jsxs)(f.Z,{sx:{color:"text.secondary"},onClick:()=>{v(!1),k(!0)},children:[(0,R.jsx)(z.Z,{children:(0,R.jsx)(U.Z,{icon:"eva:edit-fill",width:24,height:24})}),(0,R.jsx)(Q.Z,{primary:"Edit",primaryTypographyProps:{variant:"body2"}})]}),(0,R.jsxs)(f.Z,{sx:{color:"text.secondary"},onClick:async e=>{e.preventDefault();try{await C(`${c.Z.API_URL}api/delproduct/${t}`,"get",null,{}),v(!1),l(!0)}catch(n){console.log("error:",n)}},children:[(0,R.jsx)(z.Z,{children:(0,R.jsx)(U.Z,{icon:"eva:trash-2-outline",width:24,height:24})}),(0,R.jsx)(Q.Z,{primary:"Delete",primaryTypographyProps:{variant:"body2"}})]})]}),(0,R.jsx)(p.Z,{open:S,onClose:()=>k(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,R.jsx)(a.Z,{component:"main",maxWidth:"md",disableGutters:!0,children:(0,R.jsx)("div",{className:"login-modal",children:(0,R.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,R.jsx)(u.Z,{component:"h1",variant:"h5",children:"EDIT PRODUCT"}),(0,R.jsxs)(x.Z,{component:"form",noValidate:!0,onSubmit:async e=>{e.preventDefault();const t=new FormData(e.currentTarget);console.log("product:",t.get("product"));try{await C(`${c.Z.API_URL}api/product/${n.id}`,"PATCH",{product:t.get("product"),producttype_id:t.get("producttype_id"),cost:t.get("cost")})&&(k(!1),l(!0))}catch(r){console.log("error:",r)}},sx:{mt:3},style:{width:"100%",textAlign:"center"},children:[(0,R.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,R.jsx)(m.ZP,{item:!0,xs:12,sm:12,children:(0,R.jsx)(g.Z,{autoComplete:"product",name:"product",required:!0,fullWidth:!0,id:"product",label:"Product",defaultValue:n.product,autoFocus:!0})}),(0,R.jsx)(m.ZP,{item:!0,xs:12,sm:12,children:(0,R.jsxs)(j.Z,{sx:{width:1},children:[(0,R.jsx)(Z.Z,{id:"product-select",children:"Product type"}),(0,R.jsx)(y.Z,{labelId:"product-select",id:"product-select",name:"producttype_id",value:w,defaultValue:n.producttype_id,label:"Product type",onChange:e=>{P(e.target.value)},children:i.map(((e,t)=>(0,R.jsx)(f.Z,{value:e.id,children:(0,r.G)(e.product_type)},t)))})]})}),(0,R.jsxs)(m.ZP,{item:!0,container:!0,children:[(0,R.jsx)(m.ZP,{item:!0,xs:12,sm:3}),(0,R.jsx)(m.ZP,{item:!0,xs:12,sm:6,children:(0,R.jsx)(g.Z,{name:"cost",fullWidth:!0,id:"cost",label:"Cost",defaultValue:n.cost})}),(0,R.jsx)(m.ZP,{item:!0,xs:12,sm:3})]})]}),(0,R.jsx)(h.Z,{type:"submit",variant:"contained",sx:{mt:3,mb:2},style:{padding:"8px 40px 5px"},children:"Save"})]})]})})})})]})}var J=n(2241);const M=[{id:"product",label:"Product",alignRight:!1},{id:"type",label:"Type",alignRight:!1},{id:"qty",label:"Qty",alignRight:!1},{id:"cost",label:"Cost",alignRight:!1},{id:"action",label:"",alignRight:!0}];function Y(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function K(){const[e,t]=(0,o.useState)([]),[n,_]=(0,o.useState)(1),[T,A]=(0,o.useState)([]),[q,W]=(0,o.useState)([]),[$,O]=(0,o.useState)(""),[E,F]=(0,o.useState)("asc"),[V,N]=(0,o.useState)("name"),[B,z]=(0,o.useState)(0),[Q,K]=(0,o.useState)(5),[X,ee]=(0,o.useState)({}),{loading:te,request:ne}=(0,s.i)(),re=(0,o.useCallback)((async()=>{try{const e=await ne(`${c.Z.API_URL}api/product`,"GET",null,{});console.log("products:",e),t(e)}catch(e){console.log("error:",e)}}),[ne,e]);(0,o.useEffect)((()=>{re()}),[]);const ie=(0,o.useCallback)((async()=>{try{const e=await ne(`${c.Z.API_URL}api/goodtype`,"GET",null,{});A(e)}catch(e){console.log("error:",e)}}),[ne,T]);(0,o.useEffect)((()=>{ie()}),[]);const oe=t=>{if(t.target.checked){const t=e.map((e=>e.name));W(t)}else W([])},se=function(e,t,n){const r=e.map(((e,t)=>[e,t]));return r.sort(((e,n)=>{const r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n?(0,i.filter)(e,(e=>-1!==e.name.toLowerCase().indexOf(n.toLowerCase())||-1!==e.name.toLowerCase().indexOf(n.toLowerCase()))):r.map((e=>e[0]))}(e,function(e,t){return"desc"===e?(e,n)=>Y(e,n,t):(e,n)=>-Y(e,n,t)}(E,V),$),ce=0===se.length,le=e=>{O(e)},ae=(e,t)=>{F(V===t&&"asc"===E?"desc":"asc"),N(t)},de=(e,t)=>{z(t)},ue=e=>{K(parseInt(e.target.value,10)),z(0)},he=(e,t,n,r,i,o,s)=>{ee({id:t,product:n,quantity:r}),ve()},[pe,xe]=(0,o.useState)(!1),me=()=>xe(!0),ge=()=>xe(!1),je=async e=>{e.preventDefault();const t=new FormData(e.currentTarget);if(t.get("cost").match(/^[0-9]+$/))if(t.get("product"))try{await ne(`${c.Z.API_URL}api/product`,"POST",{product:t.get("product"),producttype_id:t.get("producttype_id"),cost:t.get("cost")})&&(xe(!1),Ze())}catch(n){console.log("error:",n)}else alert("You need to fill fields.");else alert("The cost must be a number.")},Ze=()=>{re()},ye=()=>{q.map((t=>{try{const n=e.filter((e=>e.name===t))[0].id;ne(`${c.Z.API_URL}api/product/${n}`,"DELETE",null,{}),Ze()}catch(n){console.log("error:",n)}}))},[fe,be]=(0,o.useState)(!1),ve=()=>be(!0),we=()=>be(!1),Pe=async e=>{e.preventDefault();const t=new FormData(e.currentTarget);try{await ne(`${c.Z.API_URL}api/qtyproduct/${X.id}`,"PATCH",{quantity:t.get("qty")})&&(be(!1),Ze())}catch(n){console.log("error:",n)}};return te?(0,R.jsx)(l.Z,{}):(0,R.jsxs)(a.Z,{children:[(0,R.jsxs)(d.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,R.jsx)(u.Z,{variant:"h4",gutterBottom:!0,children:"Products"}),(0,R.jsx)(h.Z,{variant:"contained",onClick:me,startIcon:(0,R.jsx)(U.Z,{icon:"eva:plus-fill"}),children:"New Product"}),(0,R.jsx)(p.Z,{open:pe,onClose:ge,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,R.jsx)(a.Z,{component:"main",maxWidth:"md",disableGutters:!0,children:(0,R.jsx)("div",{className:"login-modal",children:(0,R.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,R.jsx)(u.Z,{component:"h1",variant:"h5",children:"ADD PRODUCT"}),(0,R.jsxs)(x.Z,{component:"form",noValidate:!0,onSubmit:je,sx:{mt:3},style:{width:"100%",textAlign:"center"},children:[(0,R.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,R.jsx)(m.ZP,{item:!0,xs:12,sm:12,children:(0,R.jsx)(g.Z,{autoComplete:"product",name:"product",required:!0,fullWidth:!0,id:"product",label:"Product",defaultValue:X.product,autoFocus:!0})}),(0,R.jsx)(m.ZP,{item:!0,xs:12,sm:12,children:(0,R.jsxs)(j.Z,{sx:{width:1},children:[(0,R.jsx)(Z.Z,{id:"product-select",children:"Product type"}),(0,R.jsx)(y.Z,{labelId:"product-select",id:"product-select",name:"producttype_id",value:n,label:"Product type",onChange:e=>{_(e.target.value)},children:T.map(((e,t)=>(0,R.jsx)(f.Z,{value:e.id,children:(0,r.G)(e.product_type)},t)))})]})}),(0,R.jsxs)(m.ZP,{item:!0,container:!0,children:[(0,R.jsx)(m.ZP,{item:!0,xs:12,sm:3}),(0,R.jsx)(m.ZP,{item:!0,xs:12,sm:6,children:(0,R.jsx)(g.Z,{name:"cost",fullWidth:!0,id:"cost",label:"Cost",defaultValue:X.cost})}),(0,R.jsx)(m.ZP,{item:!0,xs:12,sm:3})]})]}),(0,R.jsx)(h.Z,{type:"submit",variant:"contained",sx:{mt:3,mb:2},style:{padding:"8px 40px 5px"},children:"Save"})]})]})})})}),(0,R.jsx)(p.Z,{open:fe,onClose:we,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,R.jsx)(a.Z,{component:"main",maxWidth:"md",disableGutters:!0,children:(0,R.jsx)("div",{className:"login-modal",children:(0,R.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,R.jsx)(u.Z,{component:"h1",variant:"h5",style:{textTransform:"uppercase"},children:X.product}),(0,R.jsxs)(x.Z,{component:"form",noValidate:!0,onSubmit:Pe,sx:{mt:3},style:{width:"100%",textAlign:"center"},children:[(0,R.jsx)(m.ZP,{container:!0,spacing:2,style:{justifyContent:"center"},children:(0,R.jsx)(m.ZP,{item:!0,xs:6,sm:6,children:(0,R.jsx)(b.Z,{type:"number",name:"qty",style:{textAlign:"center",fontSize:"64px"},defaultValue:X.quantity})})}),(0,R.jsx)(h.Z,{type:"submit",variant:"contained",sx:{mt:3,mb:2},style:{padding:"8px 40px 5px"},children:"Save"})]})]})})})})]}),(0,R.jsxs)(v.Z,{children:[(0,R.jsx)(G,{numSelected:q.length,onFilterName:le,onDelete:ye}),(0,R.jsx)(w.Z,{sx:{minWidth:800},children:(0,R.jsxs)(P.Z,{children:[(0,R.jsx)(L,{order:E,orderBy:V,headLabel:M,rowCount:e.length,numSelected:q.length,onRequestSort:ae,onSelectAllClick:oe}),(0,R.jsxs)(C.Z,{children:[se.slice(B*Q,B*Q+Q).map((e=>{const{id:t,product:n,quantity:r,cost:i,product_type:o,producttype_id:s}=e,c=-1!==q.indexOf(n);return(0,R.jsxs)(S.Z,{hover:!0,tabIndex:-1,role:"checkbox",selected:c,"aria-checked":c,style:{cursor:"pointer"},children:[(0,R.jsx)(k.Z,{padding:"checkbox",children:(0,R.jsx)(I.Z,{checked:c,onChange:e=>((e,t)=>{const n=q.indexOf(t);let r=[];-1===n?r=r.concat(q,t):0===n?r=r.concat(q.slice(1)):n===q.length-1?r=r.concat(q.slice(0,-1)):n>0&&(r=r.concat(q.slice(0,n),q.slice(n+1))),W(r)})(0,n)})}),(0,R.jsx)(k.Z,{component:"th",scope:"row",padding:"normal",onClick:e=>he(0,t,n,r),children:(0,R.jsx)(d.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,R.jsx)(u.Z,{variant:"body1",noWrap:!0,children:n})})}),(0,R.jsx)(k.Z,{component:"th",scope:"row",padding:"normal",onClick:e=>he(0,t,n,r),children:(0,R.jsx)(d.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,R.jsx)(u.Z,{variant:"body1",noWrap:!0,children:o})})}),(0,R.jsx)(k.Z,{component:"th",scope:"row",padding:"normal",onClick:e=>he(0,t,n,r),children:(0,R.jsx)(d.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,R.jsx)(u.Z,{variant:"body1",noWrap:!0,children:r})})}),(0,R.jsx)(k.Z,{component:"th",scope:"row",padding:"normal",onClick:e=>he(0,t,n,r),children:(0,R.jsx)(d.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,R.jsx)(u.Z,{variant:"body1",noWrap:!0,children:i})})}),(0,R.jsx)(k.Z,{align:"right",children:(0,R.jsx)(H,{id:t,product:e,productTypeList:T,onChange:Ze})})]},t)})),!1]}),ce&&(0,R.jsx)(C.Z,{children:(0,R.jsx)(S.Z,{children:(0,R.jsx)(k.Z,{align:"center",colSpan:6,sx:{py:3},children:(0,R.jsx)(J.Z,{searchQuery:$})})})})]})}),(0,R.jsx)(D.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:e.length,rowsPerPage:Q,page:B,onPageChange:de,onRowsPerPageChange:ue})]})]})}}}]);