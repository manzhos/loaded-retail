"use strict";(self.webpackChunkloaded_retail=self.webpackChunkloaded_retail||[]).push([[382],{4920:function(e,t,n){n.d(t,{Z:function(){return s}});n(7313);var r=n(2524),i=n(7829),o=n(6417);function s(e){let{icon:t,sx:n,...s}=e;return(0,o.jsx)(i.Z,{component:r.JO,icon:t,sx:{...n},...s})}},2241:function(e,t,n){n.d(t,{Z:function(){return s}});n(7313);var r=n(501),i=n(1113),o=n(6417);function s(e){let{searchQuery:t="",...n}=e;return(0,o.jsxs)(r.Z,{...n,children:[(0,o.jsx)(i.Z,{gutterBottom:!0,align:"center",variant:"subtitle1",children:"Not found"}),(0,o.jsxs)(i.Z,{variant:"body2",align:"center",children:["No results found for \xa0",(0,o.jsxs)("strong",{children:['"',t,'"']}),". Try checking for typos or using complete words."]})]})}},8382:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var r=n(3448),i=n(6031),o=n(7313),s=n(778),c=n(6287),a=n(9793),l=n(178),d=n(5898),h=n(1113),u=n(9099),p=n(7887),x=n(7829),g=n(9019),j=n(4631),Z=n(3428),m=n(1629),y=n(6835),f=n(3467),v=n(4076),w=n(7478),b=n(6330),C=n(7649),S=n(3477),P=n(2558),_=n(6417);const k={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function T(e){let{order:t,orderBy:n,rowCount:r,headLabel:i,numSelected:o,onRequestSort:s,onSelectAllClick:c}=e;return(0,_.jsx)(S.Z,{children:(0,_.jsxs)(v.Z,{children:[(0,_.jsx)(w.Z,{padding:"checkbox",children:(0,_.jsx)(b.Z,{indeterminate:o>0&&o<r,checked:r>0&&o===r,onChange:c})}),i.map((e=>{return(0,_.jsx)(w.Z,{align:e.alignRight?"right":"left",sortDirection:n===e.id&&t,children:(0,_.jsxs)(P.Z,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:(r=e.id,e=>{"role"===r&&(r="goodTypetype"),s(e,r)}),children:[e.label,n===e.id?(0,_.jsx)(x.Z,{sx:{...k},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var r}))]})})}var I=n(7592),D=n(9289),L=n(7843),R=n(1727),O=n(1689),A=n(7131),$=n(4920);const E=(0,I.ZP)(D.Z)((e=>{let{theme:t}=e;return{height:96,display:"flex",justifyContent:"space-between",padding:t.spacing(0,1,0,3)}})),F=(0,I.ZP)(L.Z)((e=>{let{theme:t}=e;return{width:240,transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:320},"& fieldset":{borderWidth:"1px !important",borderColor:`${t.palette.grey[50032]} !important`}}}));function W(e){let{numSelected:t,onFilterName:n,onDelete:r}=e;const[i,s]=(0,o.useState)("");return(0,_.jsxs)(E,{sx:{...t>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[t>0?(0,_.jsxs)(h.Z,{component:"div",variant:"subtitle1",children:[t," selected"]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(F,{value:i,onChange:e=>{s(e.target.value),n(e.target.value)},placeholder:"Search goodType...",startAdornment:(0,_.jsx)(R.Z,{position:"start",children:(0,_.jsx)($.Z,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),(0,_.jsx)("div",{style:{width:"20px"},children:"\xa0"})]}),t>0?(0,_.jsx)(O.Z,{title:"Delete",children:(0,_.jsx)(A.Z,{onClick:()=>{r()},children:(0,_.jsx)($.Z,{icon:"eva:trash-2-fill"})})}):(0,_.jsx)(O.Z,{title:"Filter list",children:(0,_.jsx)(A.Z,{children:(0,_.jsx)($.Z,{icon:"ic:round-filter-list"})})})]})}var q=n(9601),N=n(1405),U=n(4748),B=n(3213);function G(e){let{id:t,onChange:n}=e;const r=(0,o.useRef)(null),[i,a]=(0,o.useState)(!1),{request:l}=(0,s.i)();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(A.Z,{ref:r,onClick:()=>a(!0),children:(0,_.jsx)($.Z,{icon:"eva:more-vertical-fill",width:20,height:20})}),(0,_.jsx)(q.Z,{open:i,anchorEl:r.current,onClose:()=>a(!1),PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,_.jsxs)(N.Z,{sx:{color:"text.secondary"},onClick:async e=>{e.preventDefault();try{await l(`${c.Z.API_URL}api/delgoodtype/${t}`,"GET",null,{}),a(!1),n(!0)}catch(r){console.log("error:",r)}},children:[(0,_.jsx)(U.Z,{children:(0,_.jsx)($.Z,{icon:"eva:trash-2-outline",width:24,height:24})}),(0,_.jsx)(B.Z,{primary:"Delete",primaryTypographyProps:{variant:"body2"}})]})})]})}var Y=n(2241);const z=[{id:"product_type",label:"Type",alignRight:!1},{id:"act",label:"",alignRight:!1}];function Q(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function V(){const[e,t]=(0,o.useState)([]),[n,S]=(0,o.useState)([]),[P,k]=(0,o.useState)(""),[I,D]=(0,o.useState)("asc"),[L,R]=(0,o.useState)("product_type"),[O,A]=(0,o.useState)(0),[E,F]=(0,o.useState)(5),[q,N]=(0,o.useState)("add"),[U,B]=(0,o.useState)(),[V,J]=(0,o.useState)(""),{loading:M,request:H}=(0,s.i)(),K=(0,o.useCallback)((async()=>{try{const e=await H(`${c.Z.API_URL}api/goodtype`,"GET",null,{});t(e)}catch(e){console.log("error:",e)}}),[H,e]);(0,o.useEffect)((()=>{K()}),[]);const X=t=>{if(t.target.checked){const t=e.map((e=>e.product_type));S(t)}else S([])},ee=function(e,t,n){const r=e.map(((e,t)=>[e,t]));return r.sort(((e,n)=>{const r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n?(0,i.filter)(e,(e=>-1!==e.product_type.toLowerCase().indexOf(n.toLowerCase())||-1!==e.product_type.toLowerCase().indexOf(n.toLowerCase()))):r.map((e=>e[0]))}(e,function(e,t){return"desc"===e?(e,n)=>Q(e,n,t):(e,n)=>-Q(e,n,t)}(I,L),P),te=0===ee.length,ne=e=>{k(e)},re=(e,t)=>{D(L===t&&"asc"===I?"desc":"asc"),R(t)},ie=(e,t)=>{A(t)},oe=e=>{F(parseInt(e.target.value,10)),A(0)},[se,ce]=(0,o.useState)(!1),ae=e=>{N(e),ce(!0)},le=()=>ce(!1),de=async e=>{e.preventDefault();const t=new FormData(e.currentTarget);if(t.get("product_type"))try{await H(`${c.Z.API_URL}api/goodtype`,"POST",{product_type:t.get("product_type")})&&(ce(!1),ue())}catch(n){console.log("error:",n)}else alert("You need to fill fields.")},he=async e=>{e.preventDefault();const t=new FormData(e.currentTarget);if(console.log("product_type:",t.get("product_type")),t.get("product_type"))try{await H(`${c.Z.API_URL}api/goodtype/${U}`,"POST",{product_type:t.get("product_type")})&&(ce(!1),ue())}catch(n){console.log("error:",n)}else alert("You need to fill fields.")},ue=()=>{K()},pe=()=>{n.map((t=>{try{const n=e.filter((e=>e.product_type===t))[0].id;H(`${c.Z.API_URL}api/goodtype/${n}`,"DELETE",null,{}),ue()}catch(n){console.log("error:",n)}}))};return M?(0,_.jsx)(a.Z,{}):(0,_.jsxs)(l.Z,{children:[(0,_.jsxs)(d.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,_.jsx)(h.Z,{variant:"h4",gutterBottom:!0,children:"Types of goods"}),(0,_.jsx)(u.Z,{variant:"contained",onClick:()=>{ae("add")},startIcon:(0,_.jsx)($.Z,{icon:"eva:plus-fill"}),children:"Add Type"}),(0,_.jsx)(p.Z,{open:se,onClose:le,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,_.jsx)(l.Z,{component:"main",maxWidth:"md",disableGutters:!0,children:(0,_.jsx)("div",{className:"login-modal",children:(0,_.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,_.jsxs)(h.Z,{component:"h1",variant:"h5",children:[(0,_.jsx)("span",{style:{textTransform:"uppercase"},children:q})," TYPE"]}),(0,_.jsxs)(x.Z,{component:"form",noValidate:!0,onSubmit:"add"===q?de:he,sx:{mt:3},style:{width:"100%",textAlign:"center"},children:[(0,_.jsx)(g.ZP,{container:!0,spacing:2,children:(0,_.jsx)(g.ZP,{container:!0,spacing:2,item:!0,xs:12,sm:12,children:(0,_.jsx)(g.ZP,{item:!0,xs:12,sm:12,children:(0,_.jsx)(j.Z,{name:"product_type",required:!0,fullWidth:!0,id:"product_type",label:"Product Type",defaultValue:V,autoFocus:!0})})})}),(0,_.jsx)(u.Z,{type:"submit",variant:"contained",sx:{mt:3,mb:2},style:{padding:"8px 40px 5px"},children:"Save"})]})]})})})})]}),(0,_.jsxs)(Z.Z,{children:[(0,_.jsx)(W,{numSelected:n.length,onFilterName:ne,onDelete:pe}),(0,_.jsx)(m.Z,{sx:{minWidth:800},children:(0,_.jsxs)(y.Z,{children:[(0,_.jsx)(T,{order:I,orderBy:L,headLabel:z,rowCount:e.length,numSelected:n.length,onRequestSort:re,onSelectAllClick:X}),(0,_.jsxs)(f.Z,{children:[ee.map((e=>{const{id:t,product_type:i}=e,o=-1!==n.indexOf(i);return(0,_.jsxs)(v.Z,{hover:!0,tabIndex:-1,role:"checkbox",selected:o,"aria-checked":o,style:{cursor:"pointer"},children:[(0,_.jsx)(w.Z,{padding:"checkbox",children:(0,_.jsx)(b.Z,{checked:o,onChange:e=>((e,t)=>{const r=n.indexOf(t);let i=[];-1===r?i=i.concat(n,t):0===r?i=i.concat(n.slice(1)):r===n.length-1?i=i.concat(n.slice(0,-1)):r>0&&(i=i.concat(n.slice(0,r),n.slice(r+1))),S(i)})(0,i)})}),(0,_.jsx)(w.Z,{component:"th",scope:"row",padding:"normal",onClick:e=>((e,t,n)=>{B(t),J(n),ae("edit")})(0,t,i),children:(0,_.jsx)(d.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,_.jsx)(h.Z,{variant:"body1",noWrap:!0,children:(0,r.G)(i)})})}),(0,_.jsx)(w.Z,{align:"right",children:(0,_.jsx)(G,{id:t,goodType:e,onChange:ue})})]},t)})),!1]}),te&&(0,_.jsx)(f.Z,{children:(0,_.jsx)(v.Z,{children:(0,_.jsx)(w.Z,{align:"center",colSpan:6,sx:{py:3},children:(0,_.jsx)(Y.Z,{searchQuery:P})})})})]})}),(0,_.jsx)(C.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:e.length,rowsPerPage:E,page:O,onPageChange:ie,onRowsPerPageChange:oe})]})]})}}}]);