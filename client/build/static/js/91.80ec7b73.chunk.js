"use strict";(self.webpackChunkloaded_retail=self.webpackChunkloaded_retail||[]).push([[91],{4920:function(e,t,n){n.d(t,{Z:function(){return s}});n(7313);var i=n(2524),r=n(7829),o=n(6417);function s(e){let{icon:t,sx:n,...s}=e;return(0,o.jsx)(r.Z,{component:i.JO,icon:t,sx:{...n},...s})}},2241:function(e,t,n){n.d(t,{Z:function(){return s}});n(7313);var i=n(501),r=n(1113),o=n(6417);function s(e){let{searchQuery:t="",...n}=e;return(0,o.jsxs)(i.Z,{...n,children:[(0,o.jsx)(r.Z,{gutterBottom:!0,align:"center",variant:"subtitle1",children:"Not found"}),(0,o.jsxs)(r.Z,{variant:"body2",align:"center",children:["No results found for \xa0",(0,o.jsxs)("strong",{children:['"',t,'"']}),". Try checking for typos or using complete words."]})]})}},5503:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(7313),r=n(9019),o=n(9099),s=n(4920),l=n(6287),a=n(6417);function c(e){let{onFileChange:t}=e;const[c,d]=(0,i.useState)([]),[h,u]=(0,i.useState)([]);l.Z.URL;(0,i.useEffect)((()=>{if(!c||0===c.length)return;let e=c[c.length-1].name.toLowerCase().split(".").pop();if(e="jpg"===e||"jpeg"===e||"png"===e||"gif"===e?"img":"mpg"===e||"mpeg"===e||"mov"===e||"avi"===e||"asf"===e||"mp4"===e||"m4v"===e?"mov":"file","img"!==e)return void alert("Please, are adding the image.");let i=c.length-1,r=c[c.length-1].name,o=n.g.URL.createObjectURL(c[c.length-1]);u([...h,{id:i,name:r,type:e,url:o}]),t(c)}),[c]);return(0,a.jsx)(r.ZP,{item:!0,xs:12,sm:12,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{}),h.length?h.map((e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{display:"inline-block"},className:"up-photo",children:["img"===e.type&&(0,a.jsx)("img",{src:e.url,style:{width:"100%"},alt:""}),(0,a.jsx)("p",{style:{fontSize:"10px",lineHeight:"10px",marginTop:"5px"},children:e.name})]},e.id),(0,a.jsx)("div",{children:(0,a.jsx)(o.Z,{id:"DelButton",onClick:t=>(async(e,t)=>{u(h.filter((e=>e.id!==t)))})(0,e.id),variant:"text",color:"error",size:"small",children:"\u2716 Delete"})})]}))):(0,a.jsxs)("label",{htmlFor:"file",style:{width:"100%"},children:[(0,a.jsx)("input",{id:"file",name:"file",type:"file",onChange:e=>{let t=e.target.files[0];t.size>20971520?alert("File is too large"):d([...c,t])},style:{display:"none"}}),(0,a.jsx)(s.Z,{icon:"material-symbols:add-a-photo-outline",className:"up-btn",type:"button"})]})]})})}},7091:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var i=n(7313),r=n(3448),o=n(6031),s=n(778),l=n(4850),a=n(6287),c=n(9793),d=(n(5503),n(178)),h=n(5898),u=n(1113),p=n(3428),x=n(1629),g=n(6835),m=n(3467),j=n(4076),Z=n(7478),f=n(6330),y=n(7649),v=n(9374),b=(n(4920),n(2241)),w=n(6417);const C=[{id:"product",label:"Product",alignRight:!1},{id:"type",label:"Type",alignRight:!1},{id:"qty",label:"Qty",alignRight:!1},{id:"user",label:"User",alignRight:!1},{id:"date",label:"Date",alignRight:!1},{id:"store",label:"Store",alignRight:!1},{id:"photo",label:"Photo",alignRight:!1}];function S(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function P(){const{userId:e,token:t,userTypeId:n,storeId:P}=(0,i.useContext)(l.V),[k,R]=(0,i.useState)([]),[I,_]=(0,i.useState)([]),[L,D]=(0,i.useState)([]),[T,A]=(0,i.useState)(""),[F,U]=(0,i.useState)("asc"),[W,$]=(0,i.useState)("name"),[O,E]=(0,i.useState)(0),[q,z]=(0,i.useState)(5),[B,G]=(0,i.useState)([]),[N,V]=(0,i.useState)(P||null),{loading:H,request:Q}=(0,s.i)(),M=(0,i.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;try{const n=await Q(`${a.Z.API_URL}api/productflow${e?`?store_id=${e}`:""}`,"GET",null,{Authorization:`Bearer ${t}`});R(n)}catch(n){console.log("error:",n)}}),[t,Q,k]);(0,i.useEffect)((()=>{M()}),[]);const J=(0,i.useCallback)((async()=>{try{const e=await Q(`${a.Z.API_URL}api/goodtype`,"GET",null,{});_(e)}catch(e){console.log("error:",e)}}),[Q,I]);(0,i.useEffect)((()=>{J()}),[]);const K=(0,i.useCallback)((async()=>{try{const e=await Q(`${a.Z.API_URL}api/store`,"GET",null,{Authorization:`Bearer ${t}`});G(e)}catch(e){console.log("error:",e)}}),[t,Q,B]);(0,i.useEffect)((()=>{K()}),[]);const X=e=>{if(e.target.checked){const e=k.map((e=>e.name));D(e)}else D([])},Y=function(e,t,n){const i=e.map(((e,t)=>[e,t]));return i.sort(((e,n)=>{const i=t(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),n?(0,o.filter)(e,(e=>-1!==e.name.toLowerCase().indexOf(n.toLowerCase())||-1!==e.name.toLowerCase().indexOf(n.toLowerCase()))):i.map((e=>e[0]))}(k,function(e,t){return"desc"===e?(e,n)=>S(e,n,t):(e,n)=>-S(e,n,t)}(F,W),T),ee=0===Y.length,te=e=>{A(e)},ne=e=>{"all_stores"===e?(V(),M()):(V(e),M(e))},ie=(e,t)=>{U(W===t&&"asc"===F?"desc":"asc"),$(t)},re=(e,t)=>{E(t)},oe=e=>{z(parseInt(e.target.value,10)),E(0)},se=(e,t)=>{console.log("Full screen img:",e,t)};return H?(0,w.jsx)(c.Z,{}):(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(h.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:(0,w.jsx)(u.Z,{variant:"h4",gutterBottom:!0,children:"Movement of goods"})}),(0,w.jsxs)(p.Z,{children:[(0,w.jsx)(v.R0,{numSelected:L.length,onFilterName:te,storeList:B,onStore:ne,currentStore:N}),(0,w.jsx)(x.Z,{sx:{minWidth:800},children:(0,w.jsxs)(g.Z,{children:[(0,w.jsx)(v.Rg,{order:F,orderBy:W,headLabel:C,rowCount:k.length,numSelected:L.length,onRequestSort:ie,onSelectAllClick:X}),(0,w.jsxs)(m.Z,{children:[Y.slice(O*q,O*q+q).map((e=>{const{id:t,product_id:n,product:i,producttype_id:o,product_type:s,qty:l,store_id:c,store_name:d,user_id:p,firstname:x,lastname:g,photo_id:m,path:y,filename:v,ts:b}=e,C=-1!==L.indexOf(i);return(0,w.jsxs)(j.Z,{hover:!0,tabIndex:-1,role:"checkbox",selected:C,"aria-checked":C,style:{cursor:"pointer"},children:[(0,w.jsx)(Z.Z,{padding:"checkbox",children:(0,w.jsx)(f.Z,{checked:C,onChange:e=>((e,t)=>{const n=L.indexOf(t);let i=[];-1===n?i=i.concat(L,t):0===n?i=i.concat(L.slice(1)):n===L.length-1?i=i.concat(L.slice(0,-1)):n>0&&(i=i.concat(L.slice(0,n),L.slice(n+1))),D(i)})(0,i)})}),(0,w.jsx)(Z.Z,{component:"th",scope:"row",padding:"normal",onClick:()=>se(y,v),children:(0,w.jsx)(h.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,w.jsx)(u.Z,{variant:"body1",noWrap:!0,children:i})})}),(0,w.jsx)(Z.Z,{component:"th",scope:"row",padding:"normal",onClick:()=>se(y,v),children:(0,w.jsx)(h.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,w.jsx)(u.Z,{variant:"body1",noWrap:!0,children:s})})}),(0,w.jsx)(Z.Z,{component:"th",scope:"row",padding:"normal",onClick:()=>se(y,v),children:(0,w.jsx)(h.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,w.jsx)(u.Z,{variant:"body1",noWrap:!0,children:l})})}),(0,w.jsx)(Z.Z,{component:"th",scope:"row",padding:"normal",onClick:()=>se(y,v),children:(0,w.jsx)(h.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,w.jsxs)(u.Z,{variant:"body1",noWrap:!0,children:[(0,r.G)(x||"")," ",(0,r.G)(g||"")]})})}),(0,w.jsx)(Z.Z,{component:"th",scope:"row",padding:"normal",onClick:()=>se(y,v),children:(0,w.jsx)(h.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,w.jsx)(u.Z,{variant:"body1",noWrap:!0,children:b})})}),(0,w.jsx)(Z.Z,{component:"th",scope:"row",padding:"normal",onClick:()=>se(y,v),children:(0,w.jsx)(h.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,w.jsx)(u.Z,{variant:"body1",noWrap:!0,children:d})})}),(0,w.jsx)(Z.Z,{component:"th",scope:"row",padding:"normal",onClick:()=>se(y,v),children:(0,w.jsx)(h.Z,{direction:"row",alignItems:"center",spacing:2,children:v&&(0,w.jsx)("img",{src:a.Z.URL+"/"+y+"/"+v,style:{maxHeight:"100px"}})})})]},t)})),!1]}),ee&&(0,w.jsx)(m.Z,{children:(0,w.jsx)(j.Z,{children:(0,w.jsx)(Z.Z,{align:"center",colSpan:6,sx:{py:3},children:(0,w.jsx)(b.Z,{searchQuery:T})})})})]})}),(0,w.jsx)(y.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:k.length,rowsPerPage:q,page:O,onPageChange:re,onRowsPerPageChange:oe})]})]})}},9374:function(e,t,n){n.d(t,{Rg:function(){return u},R0:function(){return R},U2:function(){return E}});var i=n(7313),r=n(3477),o=n(4076),s=n(7478),l=n(6330),a=n(2558),c=n(7829),d=n(6417);const h={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function u(e){let{order:t,orderBy:n,rowCount:i,headLabel:u,numSelected:p,onRequestSort:x,onSelectAllClick:g}=e;return(0,d.jsx)(r.Z,{children:(0,d.jsxs)(o.Z,{children:[(0,d.jsx)(s.Z,{padding:"checkbox",children:(0,d.jsx)(l.Z,{indeterminate:p>0&&p<i,checked:i>0&&p===i,onChange:g})}),u.map((e=>{return(0,d.jsx)(s.Z,{align:e.alignRight?"right":"left",sortDirection:n===e.id&&t,children:(0,d.jsxs)(a.Z,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:(i=e.id,e=>{"role"===i&&(i="producttype"),x(e,i)}),children:[e.label,n===e.id?(0,d.jsx)(c.Z,{sx:{...h},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var i}))]})})}var p=n(7592),x=n(9289),g=n(7843),m=n(1113),j=n(1727),Z=n(1550),f=n(3306),y=n(4256),v=n(1405),b=n(1689),w=n(7131),C=n(4920),S=n(4850);const P=(0,p.ZP)(x.Z)((e=>{let{theme:t}=e;return{height:96,display:"flex",justifyContent:"space-between",padding:t.spacing(0,1,0,3)}})),k=(0,p.ZP)(g.Z)((e=>{let{theme:t}=e;return{width:240,transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:320},"& fieldset":{borderWidth:"1px !important",borderColor:`${t.palette.grey[50032]} !important`}}}));function R(e){var t;let{numSelected:n,onFilterName:r,storeList:o,onStore:s,currentStore:l="",onDelete:a}=e;const{storeId:c}=(0,i.useContext)(S.V),[h,u]=(0,i.useState)("");return(0,d.jsxs)(P,{sx:{...n>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[n>0?(0,d.jsxs)(m.Z,{component:"div",variant:"subtitle1",children:[n," selected"]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k,{value:h,onChange:e=>{u(e.target.value),r(e.target.value)},placeholder:"Search product...",startAdornment:(0,d.jsx)(j.Z,{position:"start",children:(0,d.jsx)(C.Z,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),(0,d.jsx)("div",{style:{width:"20px"},children:"\xa0"})]}),c?(0,d.jsxs)(m.Z,{component:"div",variant:"h2",style:{textDecoration:"underline"},children:["Store ",null===(t=o.find((e=>e.id===c)))||void 0===t?void 0:t.name]}):(0,d.jsxs)(Z.Z,{style:{width:"60%"},children:[(0,d.jsx)(f.Z,{id:"store-select",children:"Store"}),(0,d.jsxs)(y.Z,{labelId:"store-select",id:"store-select",name:"store_id",value:l,label:"Store",onChange:e=>{s(e.target.value)},children:[(0,d.jsx)(v.Z,{value:"all_stores",children:"All stores"},"all stores"),o.map(((e,t)=>(0,d.jsx)(v.Z,{value:e.id,children:e.name},t)))]})]}),(0,d.jsx)("div",{style:{width:"20px"},children:"\xa0"}),n>0?(0,d.jsx)(b.Z,{title:"Delete",children:(0,d.jsx)(w.Z,{onClick:()=>{a()},children:(0,d.jsx)(C.Z,{icon:"eva:trash-2-fill"})})}):(0,d.jsx)(b.Z,{title:"Filter list",children:(0,d.jsx)(w.Z,{children:(0,d.jsx)(C.Z,{icon:"ic:round-filter-list"})})})]})}var I=n(3448),_=n(9601),L=n(4748),D=n(3213),T=n(7887),A=n(178),F=n(9019),U=n(4631),W=n(9099),$=n(778),O=n(6287);function E(e){let{id:t,product:n={},productTypeList:r=[],onChange:o}=e;const s=(0,i.useRef)(null),[l,a]=(0,i.useState)(!1),[h,u]=(0,i.useState)(n.producttype_id),{request:p}=(0,$.i)(),[x,g]=(0,i.useState)(!1);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(w.Z,{ref:s,onClick:()=>a(!0),children:(0,d.jsx)(C.Z,{icon:"eva:more-vertical-fill",width:20,height:20})}),(0,d.jsxs)(_.Z,{open:l,anchorEl:s.current,onClose:()=>a(!1),PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,d.jsxs)(v.Z,{sx:{color:"text.secondary"},onClick:()=>{a(!1),g(!0)},children:[(0,d.jsx)(L.Z,{children:(0,d.jsx)(C.Z,{icon:"eva:edit-fill",width:24,height:24})}),(0,d.jsx)(D.Z,{primary:"Edit",primaryTypographyProps:{variant:"body2"}})]}),(0,d.jsxs)(v.Z,{sx:{color:"text.secondary"},onClick:async e=>{e.preventDefault();try{await p(`${O.Z.API_URL}api/delproduct/${t}`,"get",null,{}),a(!1),o(!0)}catch(n){console.log("error:",n)}},children:[(0,d.jsx)(L.Z,{children:(0,d.jsx)(C.Z,{icon:"eva:trash-2-outline",width:24,height:24})}),(0,d.jsx)(D.Z,{primary:"Delete",primaryTypographyProps:{variant:"body2"}})]})]}),(0,d.jsx)(T.Z,{open:x,onClose:()=>g(!1),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,d.jsx)(A.Z,{component:"main",maxWidth:"md",disableGutters:!0,children:(0,d.jsx)("div",{className:"login-modal",children:(0,d.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,d.jsx)(m.Z,{component:"h1",variant:"h5",children:"EDIT PRODUCT"}),(0,d.jsxs)(c.Z,{component:"form",noValidate:!0,onSubmit:async e=>{e.preventDefault();const t=new FormData(e.currentTarget);try{await p(`${O.Z.API_URL}api/product/${n.id}`,"PATCH",{product:t.get("product"),producttype_id:t.get("producttype_id"),cost:t.get("cost")})&&(g(!1),o(!0))}catch(i){console.log("error:",i)}},sx:{mt:3},style:{width:"100%",textAlign:"center"},children:[(0,d.jsxs)(F.ZP,{container:!0,spacing:2,children:[(0,d.jsx)(F.ZP,{item:!0,xs:12,sm:12,children:(0,d.jsx)(U.Z,{autoComplete:"product",name:"product",required:!0,fullWidth:!0,id:"product",label:"Product",defaultValue:n.product,autoFocus:!0})}),(0,d.jsx)(F.ZP,{item:!0,xs:12,sm:12,children:(0,d.jsxs)(Z.Z,{sx:{width:1},children:[(0,d.jsx)(f.Z,{id:"product-select",children:"Product type"}),(0,d.jsx)(y.Z,{labelId:"product-select",id:"product-select",name:"producttype_id",value:h,defaultValue:n.producttype_id,label:"Product type",onChange:e=>{u(e.target.value)},children:r.map(((e,t)=>(0,d.jsx)(v.Z,{value:e.id,children:(0,I.G)(e.product_type)},t)))})]})}),(0,d.jsxs)(F.ZP,{item:!0,container:!0,children:[(0,d.jsx)(F.ZP,{item:!0,xs:12,sm:3}),(0,d.jsx)(F.ZP,{item:!0,xs:12,sm:6,children:(0,d.jsx)(U.Z,{name:"cost",fullWidth:!0,id:"cost",label:"Cost",defaultValue:n.cost})}),(0,d.jsx)(F.ZP,{item:!0,xs:12,sm:3})]})]}),(0,d.jsx)(W.Z,{type:"submit",variant:"contained",sx:{mt:3,mb:2},style:{padding:"8px 40px 5px"},children:"Save"})]})]})})})})]})}}}]);