"use strict";(self.webpackChunkloaded_retail=self.webpackChunkloaded_retail||[]).push([[582],{778:function(e,t,n){n.d(t,{i:function(){return i}});var r=n(7313);const i=()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null),o=(0,r.useCallback)((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t(!0);try{r&&(r=JSON.stringify(r),o["Content-Type"]="application/json");const i=await fetch(e,{method:n,body:r,headers:o}),s=await i.json();if(!i.ok)throw new Error(s.message||"Something wrong");return t(!1),s}catch(s){throw t(!1),i(s.message),s}}),[]);return{loading:e,request:o,error:n,clearError:(0,r.useCallback)((()=>i(null)),[])}}},4920:function(e,t,n){n.d(t,{Z:function(){return s}});n(7313);var r=n(2524),i=n(7829),o=n(6417);function s(e){let{icon:t,sx:n,...s}=e;return(0,o.jsx)(i.Z,{component:r.JO,icon:t,sx:{...n},...s})}},2241:function(e,t,n){n.d(t,{Z:function(){return s}});n(7313);var r=n(501),i=n(1113),o=n(6417);function s(e){let{searchQuery:t="",...n}=e;return(0,o.jsxs)(r.Z,{...n,children:[(0,o.jsx)(i.Z,{gutterBottom:!0,align:"center",variant:"subtitle1",children:"Not found"}),(0,o.jsxs)(i.Z,{variant:"body2",align:"center",children:["No results found for \xa0",(0,o.jsxs)("strong",{children:['"',t,'"']}),". Try checking for typos or using complete words."]})]})}},1582:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var r=n(3448),i=n(6031),o=n(7313),s=n(778),a=n(6287),l=n(9793),c=n(178),d=n(5898),h=n(1113),u=n(9099),x=n(7887),g=n(7829),p=n(9019),m=n(4631),j=n(3428),Z=n(1629),f=n(6835),v=n(3467),w=n(4076),y=n(7478),b=n(6330),C=n(7649),S=n(3477),k=n(2558),P=n(6417);const D={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function E(e){let{order:t,orderBy:n,rowCount:r,headLabel:i,numSelected:o,onRequestSort:s,onSelectAllClick:a}=e;return(0,P.jsx)(S.Z,{children:(0,P.jsxs)(w.Z,{children:[(0,P.jsx)(y.Z,{padding:"checkbox",children:(0,P.jsx)(b.Z,{indeterminate:o>0&&o<r,checked:r>0&&o===r,onChange:a})}),i.map((e=>{return(0,P.jsx)(y.Z,{align:e.alignRight?"right":"left",sortDirection:n===e.id&&t,children:(0,P.jsxs)(k.Z,{hideSortIcon:!0,active:n===e.id,direction:n===e.id?t:"asc",onClick:(r=e.id,e=>{"role"===r&&(r="shoptype"),s(e,r)}),children:[e.label,n===e.id?(0,P.jsx)(g.Z,{sx:{...D},children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var r}))]})})}var I=n(7592),L=n(9289),O=n(7843),R=n(1727),A=n(1689),T=n(7131),N=n(4920);const $=(0,I.ZP)(L.Z)((e=>{let{theme:t}=e;return{height:96,display:"flex",justifyContent:"space-between",padding:t.spacing(0,1,0,3)}})),F=(0,I.ZP)(O.Z)((e=>{let{theme:t}=e;return{width:240,transition:t.transitions.create(["box-shadow","width"],{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{width:320},"& fieldset":{borderWidth:"1px !important",borderColor:`${t.palette.grey[50032]} !important`}}}));function q(e){let{numSelected:t,onFilterName:n,onDelete:r}=e;const[i,s]=(0,o.useState)("");return(0,P.jsxs)($,{sx:{...t>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[t>0?(0,P.jsxs)(h.Z,{component:"div",variant:"subtitle1",children:[t," selected"]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(F,{value:i,onChange:e=>{s(e.target.value),n(e.target.value)},placeholder:"Search shop...",startAdornment:(0,P.jsx)(R.Z,{position:"start",children:(0,P.jsx)(N.Z,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),(0,P.jsx)("div",{style:{width:"20px"},children:"\xa0"})]}),t>0?(0,P.jsx)(A.Z,{title:"Delete",children:(0,P.jsx)(T.Z,{onClick:()=>{r()},children:(0,P.jsx)(N.Z,{icon:"eva:trash-2-fill"})})}):(0,P.jsx)(A.Z,{title:"Filter list",children:(0,P.jsx)(T.Z,{children:(0,P.jsx)(N.Z,{icon:"ic:round-filter-list"})})})]})}var W=n(9601),_=n(1405),B=n(4748),G=n(3213);function U(e){let{id:t,onChange:n}=e;const r=(0,o.useRef)(null),[i,l]=(0,o.useState)(!1),{request:c}=(0,s.i)();return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(T.Z,{ref:r,onClick:()=>l(!0),children:(0,P.jsx)(N.Z,{icon:"eva:more-vertical-fill",width:20,height:20})}),(0,P.jsx)(W.Z,{open:i,anchorEl:r.current,onClose:()=>l(!1),PaperProps:{sx:{width:200,maxWidth:"100%"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,P.jsxs)(_.Z,{sx:{color:"text.secondary"},onClick:async e=>{e.preventDefault();try{await c(`${a.Z.API_URL}api/store/${t}`,"DELETE",null,{}),l(!1),n(!0)}catch(r){console.log("error:",r)}},children:[(0,P.jsx)(B.Z,{children:(0,P.jsx)(N.Z,{icon:"eva:trash-2-outline",width:24,height:24})}),(0,P.jsx)(G.Z,{primary:"Delete",primaryTypographyProps:{variant:"body2"}})]})})]})}var z=n(2241);const J=[{id:"name",label:"Name",alignRight:!1}];function Q(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function M(){const[e,t]=(0,o.useState)([]),[n,S]=(0,o.useState)([]),[k,D]=(0,o.useState)(""),[I,L]=(0,o.useState)("asc"),[O,R]=(0,o.useState)("name"),[A,T]=(0,o.useState)(0),[$,F]=(0,o.useState)(5),{loading:W,request:_}=(0,s.i)(),B=(0,o.useCallback)((async()=>{try{const e=await _(`${a.Z.API_URL}api/store`,"GET",null,{});t(e)}catch(e){console.log("error:",e)}}),[_,e]);(0,o.useEffect)((()=>{B()}),[]);const G=t=>{if(t.target.checked){const t=e.map((e=>e.name));S(t)}else S([])},M=function(e,t,n){const r=e.map(((e,t)=>[e,t]));return r.sort(((e,n)=>{const r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n?(0,i.filter)(e,(e=>-1!==e.name.toLowerCase().indexOf(n.toLowerCase())||-1!==e.name.toLowerCase().indexOf(n.toLowerCase()))):r.map((e=>e[0]))}(e,function(e,t){return"desc"===e?(e,n)=>Q(e,n,t):(e,n)=>-Q(e,n,t)}(I,O),k),V=0===M.length,Y=e=>{D(e)},H=(e,t)=>{L(O===t&&"asc"===I?"desc":"asc"),R(t)},K=(e,t)=>{T(t)},X=e=>{F(parseInt(e.target.value,10)),T(0)},[ee,te]=(0,o.useState)(!1),ne=()=>te(!0),re=()=>te(!1),ie=async e=>{e.preventDefault();const t=new FormData(e.currentTarget);if(t.get("name"))try{await _(`${a.Z.API_URL}api/store`,"POST",{name:t.get("name")})&&(te(!1),oe())}catch(n){console.log("error:",n)}else alert("You need to fill fields.")},oe=()=>{B()},se=()=>{n.map((t=>{try{const n=e.filter((e=>e.name===t))[0].id;_(`${a.Z.API_URL}api/store/${n}`,"DELETE",null,{}),oe()}catch(n){console.log("error:",n)}}))};return W?(0,P.jsx)(l.Z,{}):(0,P.jsxs)(c.Z,{children:[(0,P.jsxs)(d.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,P.jsx)(h.Z,{variant:"h4",gutterBottom:!0,children:"Stores"}),(0,P.jsx)(u.Z,{variant:"contained",onClick:ne,startIcon:(0,P.jsx)(N.Z,{icon:"eva:plus-fill"}),children:"Add Store"}),(0,P.jsx)(x.Z,{open:ee,onClose:re,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,P.jsx)(c.Z,{component:"main",maxWidth:"md",disableGutters:!0,children:(0,P.jsx)("div",{className:"login-modal",children:(0,P.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,P.jsx)(h.Z,{component:"h1",variant:"h5",children:"ADD STORE"}),(0,P.jsxs)(g.Z,{component:"form",noValidate:!0,onSubmit:ie,sx:{mt:3},style:{width:"100%",textAlign:"center"},children:[(0,P.jsx)(p.ZP,{container:!0,spacing:2,children:(0,P.jsx)(p.ZP,{container:!0,spacing:2,item:!0,xs:12,sm:12,children:(0,P.jsx)(p.ZP,{item:!0,xs:12,sm:12,children:(0,P.jsx)(m.Z,{autoComplete:"name",name:"name",required:!0,fullWidth:!0,id:"name",label:"Name",autoFocus:!0})})})}),(0,P.jsx)(u.Z,{type:"submit",variant:"contained",sx:{mt:3,mb:2},style:{padding:"8px 40px 5px"},children:"Save"})]})]})})})})]}),(0,P.jsxs)(j.Z,{children:[(0,P.jsx)(q,{numSelected:n.length,onFilterName:Y,onDelete:se}),(0,P.jsx)(Z.Z,{sx:{minWidth:800},children:(0,P.jsxs)(f.Z,{children:[(0,P.jsx)(E,{order:I,orderBy:O,headLabel:J,rowCount:e.length,numSelected:n.length,onRequestSort:H,onSelectAllClick:G}),(0,P.jsxs)(v.Z,{children:[M.map((e=>{const{id:t,name:i}=e,o=-1!==n.indexOf(i);return(0,P.jsxs)(w.Z,{hover:!0,tabIndex:-1,role:"checkbox",selected:o,"aria-checked":o,style:{cursor:"pointer"},children:[(0,P.jsx)(y.Z,{padding:"checkbox",children:(0,P.jsx)(b.Z,{checked:o,onChange:e=>((e,t)=>{const r=n.indexOf(t);let i=[];-1===r?i=i.concat(n,t):0===r?i=i.concat(n.slice(1)):r===n.length-1?i=i.concat(n.slice(0,-1)):r>0&&(i=i.concat(n.slice(0,r),n.slice(r+1))),S(i)})(0,i)})}),(0,P.jsx)(y.Z,{component:"th",scope:"row",padding:"none",onClick:e=>((e,t)=>{console.log(`Shop ${t} want to `,e.target.value)})(e,t),children:(0,P.jsx)(d.Z,{direction:"row",alignItems:"center",spacing:2,children:(0,P.jsx)(h.Z,{variant:"body1",noWrap:!0,children:(0,r.G)(i)})})}),(0,P.jsx)(y.Z,{align:"right",children:(0,P.jsx)(U,{id:t,shop:e,onChange:oe})})]},t)})),!1]}),V&&(0,P.jsx)(v.Z,{children:(0,P.jsx)(w.Z,{children:(0,P.jsx)(y.Z,{align:"center",colSpan:6,sx:{py:3},children:(0,P.jsx)(z.Z,{searchQuery:k})})})})]})}),(0,P.jsx)(C.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:e.length,rowsPerPage:$,page:A,onPageChange:K,onRowsPerPageChange:X})]})]})}}}]);